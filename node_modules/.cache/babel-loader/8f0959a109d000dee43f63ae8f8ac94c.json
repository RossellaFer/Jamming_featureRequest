{"ast":null,"code":"import _readOnlyError from \"/Users/Rossella/Documents/GitHub/Jamming/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\nvar clientID = \"f9e87b59959d4119b791de8cb11adb35\";\nvar redirectURI = \"http://localhost:3000/\";\nvar spotifyUrl = \"https://accounts.spotify.com/authorize?client_id=\".concat(clientID, \"&response_type=token&scope=playlist-modify-public&redirect_uri=\").concat(redirectURI);\nvar playlistID;\nvar access_token;\nvar Spotify = {\n  getAccessToken: function getAccessToken() {\n    if (access_token) {\n      return access_token;\n    }\n\n    var url = window.location.href;\n    var foundAccessToken = url.match(/access_token=([^&]*)/);\n    var foundExpiresIn = url.match(/expires_in=([^&]*)/);\n\n    if (foundAccessToken && foundExpiresIn) {\n      access_token = foundAccessToken[1];\n      var expires_in = Number(foundExpiresIn[1]); // window.setTimeout(() => access_token = '', foundExpiresIn * 1000);\n      // window.history.pushState('Access Token', null, '/');\n\n      return access_token;\n    } else {\n      window.location = spotifyUrl;\n      return access_token;\n    }\n  },\n  savePlaylist: function savePlaylist(playlistName, trackURIs) {\n    if (!playlistName && !trackURIs) {\n      return;\n    }\n\n    var userAccessToken = Spotify.getAccessToken();\n    var headers = {\n      Authorization: \"Bearer \".concat(userAccessToken)\n    };\n    var userID = '';\n    var userEndpoint = \"https://api.spotify.com/v1/me\";\n    var playlistEndpoint = \"https://api.spotify.com/v1/users/\".concat(userID, \"/playlists\");\n    return fetch(userEndpoint, {\n      headers: headers\n    }).then(function (response) {\n      console.log(response.json());\n      return response.json();\n    }).then(function (jsonResponse) {\n      userID = (_readOnlyError(\"userID\"), jsonResponse.id);\n    });\n    return fetch(playlistEndpoint, {\n      headers: headers,\n      method: \"POST\",\n      body: JSON.stringify({\n        name: playlistName\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (jsonResponse) {\n      var playlistID = jsonResponse.id;\n      return playlistID;\n    });\n    return fetch(\"\".concat(playlistEndpoint).concat(playlistID, \"/tracks\"), {\n      headers: headers,\n      method: \"POST\",\n      body: JSON.stringify({\n        uris: trackURIs\n      })\n    });\n  },\n  search: function search(searchTerm) {\n    var access_token = Spotify.getAccessToken();\n    var endpoint = \"https://api.spotify.com/v1/search?type=track&q=\".concat(searchTerm);\n    return fetch(endpoint, {\n      headers: {\n        Authorization: \"Bearer \".concat(access_token)\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (jsonResponse) {\n      if (!jsonResponse.tracks) {\n        return [];\n      }\n\n      return jsonResponse.tracks.items.map(function (track) {\n        return {\n          id: track.id,\n          name: track.name,\n          artist: track.artists[0].name,\n          album: track.album.name,\n          uri: track.uri\n        };\n      });\n    });\n  }\n};\nexport default Spotify;","map":{"version":3,"sources":["/Users/Rossella/Documents/GitHub/Jamming/src/util/Spotify.js"],"names":["clientID","redirectURI","spotifyUrl","playlistID","access_token","Spotify","getAccessToken","url","window","location","href","foundAccessToken","match","foundExpiresIn","expires_in","Number","savePlaylist","playlistName","trackURIs","userAccessToken","headers","Authorization","userID","userEndpoint","playlistEndpoint","fetch","then","response","console","log","json","jsonResponse","id","method","body","JSON","stringify","name","uris","search","searchTerm","endpoint","tracks","items","map","track","artist","artists","album","uri"],"mappings":"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","sourcesContent":["const clientID = \"f9e87b59959d4119b791de8cb11adb35\";\nconst redirectURI = \"http://localhost:3000/\";\nconst spotifyUrl = `https://accounts.spotify.com/authorize?client_id=${clientID}&response_type=token&scope=playlist-modify-public&redirect_uri=${redirectURI}`;\nlet playlistID;\nlet access_token;\n\n\nconst Spotify = {\n\n  getAccessToken() {\n    if (access_token) {\n      return access_token;\n    }\n    let url = window.location.href;\n    const foundAccessToken = url.match(/access_token=([^&]*)/);\n    const foundExpiresIn = url.match(/expires_in=([^&]*)/);\n\n    if(foundAccessToken && foundExpiresIn) {\n          access_token = foundAccessToken[1];\n          let expires_in = Number(foundExpiresIn[1]);\n          // window.setTimeout(() => access_token = '', foundExpiresIn * 1000);\n          // window.history.pushState('Access Token', null, '/');\n          return access_token;\n    }\n    else {\n      window.location = spotifyUrl;\n      return access_token;\n    }\n  },\n\n  savePlaylist(playlistName, trackURIs) {\n    if(!playlistName && !trackURIs) {\n      return;\n    }\n    const userAccessToken = Spotify.getAccessToken();\n    const headers = {Authorization: `Bearer ${userAccessToken}`};\n    const userID = '';\n    const userEndpoint = \"https://api.spotify.com/v1/me\";\n    const playlistEndpoint = `https://api.spotify.com/v1/users/${userID}/playlists`;\n\n    return fetch(userEndpoint, {headers: headers}).then(response => {\n      console.log(response.json())\n      return response.json();\n    }).then(jsonResponse => {\n      userID = jsonResponse.id;\n    });\n\n    return fetch(playlistEndpoint, {\n      headers: headers,\n      method: \"POST\",\n      body: JSON.stringify({name: playlistName})\n    }).then(response => {\n      return response.json();\n    }).then(jsonResponse => {\n      let playlistID = jsonResponse.id;\n      return playlistID;\n    });\n\n    return fetch(`${playlistEndpoint}${playlistID}/tracks`, {\n      headers: headers,\n      method: \"POST\",\n      body: JSON.stringify({uris: trackURIs})\n    });\n  },\n\nsearch(searchTerm) {\n  const access_token = Spotify.getAccessToken();\n  const endpoint = `https://api.spotify.com/v1/search?type=track&q=${searchTerm}`;\n  return fetch(endpoint, {headers: {\n    Authorization: `Bearer ${access_token}`\n  }}).then(response => {\n    return response.json();\n  }).then(jsonResponse => {\n    if(!jsonResponse.tracks){\n        return [];\n      }\n    return jsonResponse.tracks.items.map(track => ({\n      id: track.id,\n      name: track.name,\n      artist: track.artists[0].name,\n      album: track.album.name,\n      uri: track.uri\n    }));\n  })\n}\n\n}\n\nexport default Spotify;\n"]},"metadata":{},"sourceType":"module"}